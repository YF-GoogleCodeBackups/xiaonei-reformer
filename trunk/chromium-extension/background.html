<html>
<head>
<title>XNR Background</title>
<script>
chrome.extension.onRequest.addListener(
function(request, sender, sendResponse) {
	if (request.action == "set") {
		localStorage.setItem(request.name,JSON.stringify(request.value))
		sendResponse({});
	} else if (request.action == "get") {
		sendResponse({value: JSON.parse(localStorage.getItem(request.name))});
	} else if (request.action == "getAll") {
		var names=request.names.split("|");
		var options=new Object();
		for(var i in names) {
			options[names[i]]=JSON.parse(localStorage.getItem(names[i]));
		}
		sendResponse({options:options});
	} else if (request.action == "request") {
		var httpReq=$.get(req.url,function(data,text){req.onload(httpReq)});
		sendResponse({});
	}
});
</script>
</head>
<body>
</body>
</html>
